include(GenerateExportHeader)

qt_add_library(tst_qmlsplitlib_library
        lib.h
        lib.cpp
)
qt_autogen_tools_initial_setup(tst_qmlsplitlib_library)
target_include_directories(tst_qmlsplitlib_library PRIVATE ${CMAKE_CURRENT_BINARY_DIR}) # find autogenerated header
generate_export_header(tst_qmlsplitlib_library)

target_link_libraries(tst_qmlsplitlib_library Qt::Core)

qt_internal_add_test(tst_qmlsplitlib
    SOURCES
        tst_qmlsplitlib.cpp
    LIBRARIES
        Qt::Core
        Qt::Qml
)
qt_autogen_tools_initial_setup(tst_qmlsplitlib)

qt6_generate_foreign_qml_types(tst_qmlsplitlib_library tst_qmlsplitlib)

qt6_add_qml_module(tst_qmlsplitlib
    VERSION 1.0
    URI "SplitLib"
    QML_FILES
        main.qml
)

target_link_libraries(tst_qmlsplitlib PRIVATE tst_qmlsplitlib_library)
